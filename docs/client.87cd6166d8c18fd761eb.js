!function(e){function t(t){for(var a,l,i=t[0],r=t[1],s=t[2],u=0,b=[];u<i.length;u++)l=i[u],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&b.push(n[l][0]),n[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);for(d&&d(t);b.length;)b.shift()();return c.push.apply(c,s||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],a=!0,i=1;i<o.length;i++){var r=o[i];0!==n[r]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=o[0]))}return e}var a={},n={1:0},c=[];function l(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=a,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(o,a,function(t){return e[t]}.bind(null,a));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=r;c.push([59,0,3]),o()}({59:function(e,t,o){"use strict";o.r(t);var a=o(31),n=o(0),c=o.n(n),l=o(10),i=o.n(l),r=o(2),s=o(26),d=o(1),u=o(28),b=o(11),p=o.n(b);const m=Object(r.a)("div",{target:"e1n9mqgr0",label:"StyledAbout"})({name:"179grut",styles:"line-height:1.3;margin-top:55px;& a{color:#966be6;}& a:hover{color:#7246c5;}"}),f=Object(r.a)("div",{target:"e1n9mqgr1",label:"Top"})({name:"0",styles:""}),g=Object(r.a)("div",{target:"e1n9mqgr2",label:"Bottom"})({name:"1majwkq",styles:"align-items:center;display:flex;& img{height:55px;}& > div:last-child{margin-left:45px;}"}),y=Object(r.a)("div",{target:"e1n9mqgr3",label:"H1"})({name:"jm21md",styles:"font-size:15px;font-weight:500;margin:10 0;"}),h=Object(r.a)("p",{target:"e1n9mqgr4",label:"P"})({name:"1xaqcky",styles:"margin-bottom:11px;"});var O=({})=>Object(d.c)(m,null,Object(d.c)(f,null,Object(d.c)("div",null,Object(d.c)(y,null,"Moodsic: Mood Classification Using Spectrograms of Sound"),Object(d.c)(h,null,"Moodsic classifies your sound of choice according to its mood. It generates a spectrogram of your sound then feeds it into a convolutional neural network flavored model we trained. The project also explores the power of cloud based machine intelligence. See the ",Object(d.c)("a",{href:"http://github.com/eldeni/moodsic"},"documentation")," to learn more."),Object(d.c)(h,null,"This is a demo page and the application is set to process pre-determined 3 songs. Click Start or Start Over to launch or stop the application. Once it gets the classification result, you can then listen to a song of specific mood by clicking the emotion."))),Object(d.c)(g,null,Object(d.c)("div",null,Object(d.c)("img",{alt:"logo-moodsic",src:"/assets/logo-moodsic.png"}),Object(d.c)("img",{alt:"logo-moodsic",src:"/assets/logo-sound-therapy.png"})),Object(d.c)("div",null,Object(d.c)("p",null,Object(d.c)("a",{href:"https://github.com/eldeni/moodsic/"},"Github")),Object(d.c)("p",null,"Moodsic 2020"))));const j=Object(r.a)("div",{target:"e1ysyhcl0",label:"StyledControl"})({name:"62nru7",styles:"display:flex;margin-top:30px;"}),v=Object(r.a)("button",{target:"e1ysyhcl1",label:"Button"})(({bgColor:e,disabled:t})=>({alignItems:"center",backgroundColor:e,borderRadius:8,cursor:"pointer",display:"flex",fontSize:15,height:36,justifyContent:"center",opacity:t?.7:1,outline:0,width:100,"&:hover":{fontWeight:800,transform:t?"none":"translate(1px,1px)"}}),""),x=Object(r.a)(v,{target:"e1ysyhcl2",label:"Submit"})({name:"17yn72c",styles:"background-color:#3c3938;color:white;width:120px;"}),w=Object(r.a)("div",{target:"e1ysyhcl3",label:"Left"})({name:"1mmtv2s",styles:"width:220px;"}),S=Object(r.a)("div",{target:"e1ysyhcl4",label:"Right"})({name:"tvo5yh",styles:"display:flex;& > *{margin-right:19px;}"});var k=({classificationIsReady:e,handleClickSubmit:t,startStopState:o})=>{const a=c.a.useCallback((e,t)=>{const o=document.getElementById("form"),a=o.labels.indexOf(t);console.log("Control(): only playing index: %s, label: %s, sources: %o, labels: %o",a,t,o.sources,o.labels),o.sources.forEach((e,t)=>{if(t!==a)console.log("Control(): source at: %s will stop",t),e.stop(0);else{console.log("Control(): found the source of index: %s",t),document.getElementById(`classification-${t}`).classList.add("focus")}})},[]);return Object(d.c)(j,null,Object(d.c)(w,null,Object(d.c)(x,{onClick:t,type:"button"},"Start"===o.current?"Start":"Start Over")),Object(d.c)(S,null,Object(d.c)(v,{bgColor:"#f1819b",disabled:!e,onClick:e=>a(e,"happy"),type:"button"},"Happy"),Object(d.c)(v,{bgColor:"#f7eead",disabled:!e,onClick:e=>a(e,"calm"),type:"button"},"Calm"),Object(d.c)(v,{bgColor:"#28a8d8",disabled:!e,onClick:e=>a(e,"sad"),type:"button"},"Sad")))};var C=[{classify:{classification:{score:.9917780160903931},displayName:"happy"},fileName:"Black Eyed Peas - I Gotta Feeling",fileUrl:"/assets/67.wav",imgSrc:"/assets/67.wav.png"},{classify:{classification:{score:.8593841195106506},displayName:"calm"},fileName:"Vivaldi: The Four Seasons - Concerto No. 1, Spring",fileUrl:"/assets/96.wav",imgSrc:"/assets/96.wav.png"},{classify:{classification:{score:.9917780160903931},displayName:"sad"},fileName:"Beatles: Yesterday",fileUrl:"/assets/1.wav",imgSrc:"/assets/1.wav.png"}];const I=Object(r.a)("div",{target:"e1dihcpe0",label:"StyledRow"})({name:"1kukc4r",styles:"display:flex;margin-bottom:16px;"}),N=Object(r.a)("div",{target:"e1dihcpe1",label:"StyledInput"})({name:"qhz7fu",styles:"border-radius:7px;display:flex;flex-direction:column;font-size:13px;width:200px;& input{border-bottom:1px solid #bfbfbf;cursor:pointer;padding-bottom:2px;}& input:hover{font-weight:600;}& .filename-production{padding-top:4px;}"}),B=({fileName:e,fileUrl:t,itemId:o})=>Object(d.c)(N,null,Object(d.c)("input",{className:"files",disabled:!0,type:"file"}),Object(d.c)("p",{className:"hide",id:`fileUrl-production-${o}`},t),Object(d.c)("p",{className:"fileName-production",id:`fileName-production-${o}`},e)),E=Object(r.a)("div",{target:"e1dihcpe2",label:"Spectrogram"})({name:"vmdynv",styles:"display:inline-block;margin-left:20px;width:280px;& div:first-child{background-color:#2b2b2b;}& canvas{width:280px;height:85px;}& img{height:50px;margin-top:6px;width:100%;}"}),M=({imgSrc:e})=>Object(d.c)("img",{alt:"Spectrogram image pre-generated",src:e}),U=Object(r.a)("div",{target:"e1dihcpe3",label:"StyledClassification"})({name:"cbo70w",styles:"margin-left:20px;width:100px;& p{color:#565656;}& p:first-child{border-bottom:1px solid #bfbfbf;font-size:14px;font-weight:600;padding:2 0 2;margin-bottom:4px;}& .focus, & .focus *{color:white;font-weight:600;background-color:#0a0c0c;}& > p:last-child{padding-top:10px;}"}),A=({itemId:e})=>Object(d.c)(U,null,Object(d.c)("p",null,"Classification"),Object(d.c)("p",{id:`classification-${e}`},"No Data"));var D=({itemId:e,pregeneratedData:t={}})=>{const{fileName:o,fileUrl:a,imgSrc:n}=t;return Object(d.c)(I,null,Object(d.c)(B,{fileName:o,fileUrl:a,itemId:e}),Object(d.c)(E,null,Object(d.c)("div",null,Object(d.c)("canvas",{id:`canvas-${e}`})),Object(d.c)(M,{imgSrc:n})),Object(d.c)(A,{itemId:e}))};const q=Object(r.a)("div",{target:"e1a0vw840",label:"StyledMain"})({name:"14bbsej",styles:"width:650px;"});var T=()=>{c.a.useEffect(()=>{console.log("Main(): useEffect(): main is rendered");const e=document.getElementById("form");e.sources=[],e.labels=[]},[]);const e=c.a.useRef("Start"),[,t]=c.a.useState(),o=c.a.useCallback(o=>{e.current=o,t({})},[]),[a,n]=c.a.useState(!1),l=c.a.useCallback(function(e,t,o){return()=>{const a=document.getElementsByClassName("files"),n=document.getElementById("form");if(console.log("createHandleclickSubmit(): startStop: %s",o.current),"Start"===o.current){t("Stop");const c=new FormData,l={};for(let t=0;t<a.length;t+=1){const i=a[t].files[0],r=document.getElementById(`canvas-${t}`);void 0!==i&&(console.log("createHandleclickSubmit(): start, file: %o",i),c.append("files",i),l[i.name]=t,$(i,r,t,o));{const a=document.getElementById(`fileUrl-production-${t}`);null!==a&&p.a.get(a.innerText,{responseType:"blob"}).then(a=>{const{data:c}=a,l=C[t];e(!0),console.log("createHandleclickSubmit(): NODE_ENV: production, i: %s, including data: %o, pregeneratedData: %o",t,c,l);const i=document.getElementById(`classification-${t}`);if(null!==i){const{classification:e,displayName:o}=l.classify,a=100*+e.score/100;n.labels[t]=o;const c=`<b>${o}</b> (${a.toFixed(5)}%)`;i.innerHTML=c}$(c,r,t,o)})}}Object.keys(l).length,0}else{t("Start"),e(!1);for(let e=0;e<a.length;e+=1){const t=a[e].files[0];console.log("createHandleclickSubmit(): stop, i: %s, file: %o, sources: %o",e,t,n.sources),void 0!==n.sources[e]&&(console.log("createHandleclickSubmit(): stop source, i:%s",e),n.sources[e].stop());const o=document.getElementById(`classification-${e}`);null!==o&&(o.innerHTML="No Data",o.classList.remove("focus")),setTimeout(()=>{const t=document.getElementById(`canvas-${e}`);t.getContext("2d").clearRect(0,0,t.width,t.height)},200)}n.sources=[]}}}(n,o,e),[e]);return Object(d.c)(q,null,Object(d.c)("form",{id:"form"},Object(d.c)(D,{itemId:"0",pregeneratedData:C[0]}),Object(d.c)(D,{itemId:"1",pregeneratedData:C[1]}),Object(d.c)(D,{itemId:"2",pregeneratedData:C[2]}),Object(d.c)(k,{classificationIsReady:a,handleClickSubmit:l,startStopState:e})),Object(d.c)(O,null))};function $(e,t,o,a){console.log("drawSpectrogram(): idx: %s",o);try{new(window.AudioContext||window.webkitAudioContext)}catch(e){return void console.error("Audio API is not available")}const n=t.width,c=new(window.AudioContext||window.webkitAudioContext),l=t.getContext("2d"),i=document.getElementById("form");let r,s,d,u,b=0,p=c.createAnalyser();p.smoothingTimeConstant=0,p.fftSize=256;const m=p.frequencyBinCount;s=8*m+1,d=new Uint8Array(m),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,u=l.createImageData(2,t.height);for(var f=0;f<4*u.data.length;f+=8)u.data[f]=u.data[f+6]=0,u.data[f+3]=u.data[f+4]=u.data[f+5]=u.data[f+7]=255;r=c.createBufferSource(),i.sources[o]=r;const g=new FileReader;function y(){"Stop"===a.current&&requestAnimationFrame(y),p.getByteFrequencyData(d);for(var e=0,t=s;e<m;++e,t-=8)u.data[t]=u.data[t+1]=2*d[e];l.putImageData(u,b,0),b<n?b+=1:b=0}g.onload=function(e){c.decodeAudioData(e.target.result,(function(e){r.buffer=e,r.connect(p),r.connect(c.destination),r.start(0),y()}),e=>{console.log("drawSpectrogram(): erorr",e)})},g.readAsArrayBuffer(e)}const H={name:"11k9aqh-customStyle",styles:"a{text-decoration:none;}body{}button{border:0;}input{border:none;outline:none;}p{margin:0;}.hide{display:none;}*{box-sizing:border-box;color:black;};label:customStyle;"},P=Object(r.a)("div",{target:"e1pcrv0a0",label:"StyledUniversal"})({name:"16m4vk0",styles:'display:flex;font-family:"Roboto", "Helvetica", "Arial", sans-serif;;font-size:14px;justify-content:center;padding-top:40px;'});var z=Object(s.a)(u.hot)(()=>Object(d.c)(P,null,Object(d.c)(T,null),Object(d.c)(d.a,{styles:H})));const R=document.getElementById("react-root");i.a.hydrate(Object(d.c)(()=>Object(d.c)(a.a,null,Object(d.c)(z,null)),null),R,()=>{})}});
//# sourceMappingURL=client.87cd6166d8c18fd761eb.js.map